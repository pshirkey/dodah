<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>DoDah Service Test</title>
<link href="/css/styles.css" rel="stylesheet" type="text/css" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
<script src="http://ajax.microsoft.com/ajax/jquery.validate/1.7/jquery.validate.min.js"></script>
<script src="/javascript/jquery.md5.js"></script>
 <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
 
</head>
<body>
	<div class="content"> 	
 	<div style="width:820px;margin-left:auto;margin-right:auto;margin-top:75px;" id="pageContent">
	<h1>DoDah Service Tests</h1>
	
	<div class="mainColumn" id="cleardiv" name="cleardiv" style="border:solid;padding:30px;margin:30px;">
		<button id="clear" name="clear">Clear Test Data</button><span style="padding:20px;">{{ cleared_message }}</span>
	</div>
	<div class="mainColumn" id="create" name="create" style="border:solid;padding:30px;margin:30px;"> 
	<form id="createform" name="createform">
		<input type="hidden" id="service_client" name="service_client" value="882AF324A4DC11DFB3BABF3DE0D72085"/>
		<h1>Create an account</h1>
        <div class="section">
			<label for="name">First Name:</label>
			<input type="text" id="first_name" name="first_name"/>
		</div>	
		<div class="section">
			<label for="name">Last Name:</label>
			<input type="text" id="last_name" name="last_name"/>
		</div>	
		<div class="section">
			<label for="name">Email Address:</label>
			<input type="text" class="required email" id="email" name="email" />
		</div>		
		<br/>		
		<div class="section">
			<label for="name">Password MD5:</label>
			<input type="text" class="required" id="password" name="password"/>
		</div>			
	</form>	
	<div><button id="createbutton" name="createbutton">Create Account</button></div>
	<div style="mrgin:20px;">
			<label for="name">Create MD5 Password:</label>
			<input type="text" id="pass_clear" name="pass_clear"/>
			<button id="md" name="md">MD5 It!</button>
		</div>	
	</div>
	
	<div class="mainColumn" id="createresult" name="createresult" style="border:solid;padding:30px;margin:30px;display:none"> 
	<h1>Create an account - Result</h1>
        <div id="createreturn" name="createreturn"></div>
	</div>
	
	<div class="mainColumn" id="create" name="create" style="border:solid;padding:30px;margin:30px;"> 
	<form id="authform" name="authform" >
		<input type="hidden" id="service_client" name="service_client" value="882AF324A4DC11DFB3BABF3DE0D72085"/>
		<h1>Autheticate</h1>
        <div class="section">
			<label for="name">email:</label>
			<input type="text" id="email" name="email"/>
		</div>	
		<div class="section">
			<label for="name">Password MD5:</label>
			<input type="text" class="required" id="password" name="password"/>
		</div>		
	</form>	
	<div><button id="authbutton" name="authbutton">Authenticate</button></div>	
	</div>
	<div class="mainColumn" id="authresult" name="authresult" style="border:solid;padding:30px;margin:30px;display:none"> 
	<h1>Autheticate - Result</h1>
        <div id="authreturn" name="authresult"></div>
	</div>
	
	</div>
	</div>
	<script>
		 $(document).ready(function(){
		 	$("#md").button();
			$("#md").click(function (e){
				e.stopPropagation();
				var md_str = $.md5($("#pass_clear").val());
				$("#password").val(md_str);
			});
			
			$("#authbutton").button();
			$("#authbutton").click(function (e){				
				$.ajax({
								url: '/service/authenticate',
								data: $('#authform').serialize(),
								type: 'post',
								cache: false,
								success: function (data) {
									$('#authresult').fadeIn(200, function () {
										$('#authresult').html(data).fadeIn(200);
									});
								},
							});
			});
			
			$("#clear").button();
			$("#clear").click(function(e){
				window.location = "/test/clear";
			});
			
			$("#createbutton").button();
			$("#createbutton").click(function(e){
				$.ajax({
								url: '/service/createaccount',
								data: $('#createform').serialize(),
								type: 'post',
								cache: false,
								success: function (data) {
									$('#createresult').fadeIn(200, function () {
										$('#createreturn').html(data).fadeIn(200);
									});
								},
							});
			});		
		 	
			
		  $(".resize").vjustify();
		  $("div.buttonSubmit").hoverClass("buttonSubmitHover");		
		  if ($.browser.safari) {
		    $("body").addClass("safari");
		  }
		 });
	</script>
</body>	
 </html>